{"ast":null,"code":"import _regeneratorRuntime from\"/home/teo/Documentos/Projectos/card-game/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/teo/Documentos/Projectos/card-game/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/teo/Documentos/Projectos/card-game/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import TextField from\"@material-ui/core/TextField\";import{makeStyles}from\"@material-ui/core/styles\";import{AuthService}from\"../../utils/services/Auth.service\";var authService=new AuthService();var useStyles=makeStyles(function(theme){return{root:{\"& .MuiTextField-root\":{margin:theme.spacing(1),width:200}}};});export default function Login(props){var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),userError=_useState6[0],setUserError=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),passError=_useState8[0],setPassError=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),submitDisabled=_useState10[0],setSubmitDisabled=_useState10[1];var onChange=function onChange(e){var _e$currentTarget=e.currentTarget,name=_e$currentTarget.name,value=_e$currentTarget.value;console.log(e,name,value);var regUser=/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;var regPass=/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;switch(name){case\"user\":if(regUser.test(value)){setUserError(false);setUser(value);}else{setUserError(true);}break;case\"password\":if(regPass.test(value)){setPassError(false);setPassword(value);}else{setPassError(true);}break;}if(!userError&&!passError)setSubmitDisabled(false);else setSubmitDisabled(true);};var onSubmit=function onSubmit(e){e.preventDefault();authService.login({user:user,password:password}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(theUser){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return props.setUser(theUser);case 2:console.log(theUser);props.history.push(\"/\");case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};return React.createElement(\"form\",{className:classes.root,noValidate:true,autoComplete:\"on\",onSubmit:onSubmit},React.createElement(\"div\",null,React.createElement(TextField,{onChange:onChange,error:userError,id:\"filled-error\",label:\"user\",name:\"user\",defaultValue:\"E-mail\",helperText:\"Incorrect entry.\",variant:\"filled\",required:true}),React.createElement(TextField,{onChange:onChange,error:passError,id:\"filled-error\",label:\"password\",name:\"password\",defaultValue:\"Password\",type:\"password\",helperText:\"Incorrect entry.\",variant:\"filled\",required:true})),React.createElement(\"button\",{disabled:submitDisabled},\"Login\"));}","map":{"version":3,"sources":["/home/teo/Documentos/Projectos/card-game/client/src/components/auth/Login.jsx"],"names":["React","useState","TextField","makeStyles","AuthService","authService","useStyles","theme","root","margin","spacing","width","Login","props","classes","user","setUser","password","setPassword","userError","setUserError","passError","setPassError","submitDisabled","setSubmitDisabled","onChange","e","currentTarget","name","value","console","log","regUser","regPass","test","onSubmit","preventDefault","login","then","theUser","history","push"],"mappings":"+eAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,OAASC,WAAT,KAA4B,mCAA5B,CACA,GAAMC,CAAAA,WAAW,CAAG,GAAID,CAAAA,WAAJ,EAApB,CACA,GAAME,CAAAA,SAAS,CAAGH,UAAU,CAAC,SAAAI,KAAK,QAAK,CACrCC,IAAI,CAAE,CACJ,uBAAwB,CACtBC,MAAM,CAAEF,KAAK,CAACG,OAAN,CAAc,CAAd,CADc,CAEtBC,KAAK,CAAE,GAFe,CADpB,CAD+B,CAAL,EAAN,CAA5B,CASA,cAAe,SAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsB,CACnC,GAAMC,CAAAA,OAAO,CAAGR,SAAS,EAAzB,CADmC,cAEXL,QAAQ,CAAC,EAAD,CAFG,wCAE5Bc,IAF4B,eAEtBC,OAFsB,8BAGHf,QAAQ,CAAC,EAAD,CAHL,yCAG5BgB,QAH4B,eAGlBC,WAHkB,8BAIDjB,QAAQ,CAAC,IAAD,CAJP,yCAI5BkB,SAJ4B,eAIjBC,YAJiB,8BAKDnB,QAAQ,CAAC,IAAD,CALP,yCAK5BoB,SAL4B,eAKjBC,YALiB,8BAMSrB,QAAQ,CAAC,IAAD,CANjB,0CAM5BsB,cAN4B,gBAMZC,iBANY,gBAQnC,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,CAAC,CAAI,sBACIA,CAAC,CAACC,aADN,CACZC,IADY,kBACZA,IADY,CACNC,KADM,kBACNA,KADM,CAEpBC,OAAO,CAACC,GAAR,CAAYL,CAAZ,CAAeE,IAAf,CAAqBC,KAArB,EACA,GAAMG,CAAAA,OAAO,CAAG,wJAAhB,CACA,GAAMC,CAAAA,OAAO,CAAG,uCAAhB,CACA,OAAQL,IAAR,EACE,IAAK,MAAL,CACE,GAAII,OAAO,CAACE,IAAR,CAAaL,KAAb,CAAJ,CAAyB,CACvBT,YAAY,CAAC,KAAD,CAAZ,CACAJ,OAAO,CAACa,KAAD,CAAP,CACD,CAHD,IAGO,CACLT,YAAY,CAAC,IAAD,CAAZ,CACD,CACD,MACF,IAAK,UAAL,CACE,GAAIa,OAAO,CAACC,IAAR,CAAaL,KAAb,CAAJ,CAAyB,CACvBP,YAAY,CAAC,KAAD,CAAZ,CACAJ,WAAW,CAACW,KAAD,CAAX,CACD,CAHD,IAGO,CACLP,YAAY,CAAC,IAAD,CAAZ,CACD,CACD,MAhBJ,CAmBA,GAAI,CAACH,SAAD,EAAc,CAACE,SAAnB,CAA8BG,iBAAiB,CAAC,KAAD,CAAjB,CAA9B,IACKA,CAAAA,iBAAiB,CAAC,IAAD,CAAjB,CACN,CA1BD,CA4BA,GAAMW,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAT,CAAC,CAAI,CACpBA,CAAC,CAACU,cAAF,GACA/B,WAAW,CAACgC,KAAZ,CAAkB,CAAEtB,IAAI,CAAJA,IAAF,CAAQE,QAAQ,CAARA,QAAR,CAAlB,EAAsCqB,IAAtC,0FAA2C,iBAAMC,OAAN,wIACnC1B,CAAAA,KAAK,CAACG,OAAN,CAAcuB,OAAd,CADmC,QAEzCT,OAAO,CAACC,GAAR,CAAYQ,OAAZ,EACA1B,KAAK,CAAC2B,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EAHyC,sDAA3C,gEAKD,CAPD,CAQA,MACE,6BAAM,SAAS,CAAE3B,OAAO,CAACN,IAAzB,CAA+B,UAAU,KAAzC,CAA0C,YAAY,CAAC,IAAvD,CAA4D,QAAQ,CAAE2B,QAAtE,EACE,+BACE,oBAAC,SAAD,EACE,QAAQ,CAAEV,QADZ,CAEE,KAAK,CAAEN,SAFT,CAGE,EAAE,CAAC,cAHL,CAIE,KAAK,CAAC,MAJR,CAKE,IAAI,CAAC,MALP,CAME,YAAY,CAAC,QANf,CAOE,UAAU,CAAC,kBAPb,CAQE,OAAO,CAAC,QARV,CASE,QAAQ,KATV,EADF,CAYE,oBAAC,SAAD,EACE,QAAQ,CAAEM,QADZ,CAEE,KAAK,CAAEJ,SAFT,CAGE,EAAE,CAAC,cAHL,CAIE,KAAK,CAAC,UAJR,CAKE,IAAI,CAAC,UALP,CAME,YAAY,CAAC,UANf,CAOE,IAAI,CAAC,UAPP,CAQE,UAAU,CAAC,kBARb,CASE,OAAO,CAAC,QATV,CAUE,QAAQ,KAVV,EAZF,CADF,CA0BE,8BAAQ,QAAQ,CAAEE,cAAlB,UA1BF,CADF,CA8BD","sourcesContent":["import React, { useState } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { AuthService } from \"../../utils/services/Auth.service\";\nconst authService = new AuthService();\nconst useStyles = makeStyles(theme => ({\n  root: {\n    \"& .MuiTextField-root\": {\n      margin: theme.spacing(1),\n      width: 200\n    }\n  }\n}));\n\nexport default function Login(props) {\n  const classes = useStyles();\n  const [user, setUser] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [userError, setUserError] = useState(true);\n  const [passError, setPassError] = useState(true);\n  const [submitDisabled, setSubmitDisabled] = useState(true);\n\n  const onChange = e => {\n    const { name, value } = e.currentTarget;\n    console.log(e, name, value);\n    const regUser = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    const regPass = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;\n    switch (name) {\n      case \"user\":\n        if (regUser.test(value)) {\n          setUserError(false);\n          setUser(value);\n        } else {\n          setUserError(true);\n        }\n        break;\n      case \"password\":\n        if (regPass.test(value)) {\n          setPassError(false);\n          setPassword(value);\n        } else {\n          setPassError(true);\n        }\n        break;\n    }\n\n    if (!userError && !passError) setSubmitDisabled(false);\n    else setSubmitDisabled(true);\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n    authService.login({ user, password }).then(async theUser => {\n      await props.setUser(theUser);\n      console.log(theUser);\n      props.history.push(\"/\");\n    });\n  };\n  return (\n    <form className={classes.root} noValidate autoComplete=\"on\" onSubmit={onSubmit}>\n      <div>\n        <TextField\n          onChange={onChange}\n          error={userError}\n          id=\"filled-error\"\n          label=\"user\"\n          name=\"user\"\n          defaultValue=\"E-mail\"\n          helperText=\"Incorrect entry.\"\n          variant=\"filled\"\n          required\n        />\n        <TextField\n          onChange={onChange}\n          error={passError}\n          id=\"filled-error\"\n          label=\"password\"\n          name=\"password\"\n          defaultValue=\"Password\"\n          type=\"password\"\n          helperText=\"Incorrect entry.\"\n          variant=\"filled\"\n          required\n        />\n      </div>\n      <button disabled={submitDisabled}>Login</button>\n    </form>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}